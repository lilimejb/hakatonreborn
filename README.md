# [Бот в Telegram](https://t.me/stolovkatest_bot)

# Краткая инструкция по использованию
```
Выбирайте категорию блюд, нажимая на интересующее, нажатием кнопок "+" и "-" регулируйте количество и
нажимайте "Добавить в корзину".
Как соберёте все нужные для вас блюда - переходите в корзину и оплачивай заказ.
Номер заказа будет написан после оплаты
Приятного аппетита!
```

#### Для оплаты используйте тестовую карту:<br/>
- **Номер**: `1111 1111 1111 1026`<br/>
- **Дата**: `12/22`<br/>
- **CVC**: `000`<br/>

# Мои контакты 
## [telegram](https://t.me/lilimejb) <br/>[vk](https://vk.com/lilimejb)<br/> 

# Известные баги
В программе присутсвуют баги, которые можно было исправить при наличии большего количества времени:

- ### В корзину можно добавить отрицательное количество товаров
    Решение проблемы:<br/>
    > Изменить в файле handlers/dish_page.py строки 35-36
    ```py
    if action == "MINUS" !!!and int(amount) - 1 > 0!!!:
        amount = int(amount) - 1
    ```
- ### При оплате заказа корзина не отчищается атоматически
    Решение проблемы:<br/>
    > Изменить в файле handlers/order.py строки 41-44
    ```py
    for cart in carts:
        if str(cart.get_userid()) == current_user:
            !!!carts.remove(cart)!!!
            current_cart = dict(eval(repr(cart)))
            break
    ```
- ### При частом нажатии на кнопки бот начинает долго загружаться
    Решение проблемы:<br/>
    > Оптимизировать api

# Улучшения
Сейчас бот больше похож на версию закрытого бета теста, поэтому есть несколько улучшений которые можно сделать:

- ### Больше способов оплаты

    Можно ввести оплату с помощью СБП или с помощью QR-кода на кассе
    В первом случае бот будет создавать кнопку с встроенной ссылкой на оплату по СБП
    Во втором телеграм будет присылать QR-код с которым можно будет подойти к кассиру и оплатить заказ наличными.

- ### Сделать в боте выбор локации для заказа

    На данный момент реализован только заказ в столовой.
    Так как у вуза есть ещё 2 предприятия можно сделать выбор места для заказа.

- ### Добавить комбо обед

    В столовой университета присутсвуют комбо обеды, которые были добавлены
    в базу данных и в api, но пока что не реализованы в самом боте.

- ### Связать бота с **iikoapicloud**

    Так как столовая не предоставила доступа к своим базам в сервисе [iiko](https://iiko.ru/) и к его api - **iikocloudapi**,
    api было написано вручную, что не позволяет сделать большое разнообразие блюд и раскрыть весь потенциал бота.

- ### Сделать бота-приложение

    Для меня огромный плюс многих ботов - мало сообщений в чате. Хотелось бы реализовать полное избавление от лишних сообщений
